webpackJsonp([1],{"5X+L":function(t,e){},"6dmq":function(t,e){},"7lZB":function(t,e){},"9bI3":function(t,e){},CzsW:function(t,e){},NHnr:function(t,e,n){"use strict";function a(t){n("9bI3")}function s(t){n("CzsW")}function r(t){n("7lZB")}function i(t){n("6dmq")}function o(t){n("5X+L")}function c(t){n("cpaK")}function l(t){n("nb0D")}function u(t){n("W5C1")}Object.defineProperty(e,"__esModule",{value:!0});var d=n("7+uW"),v=n("/ocq"),p={name:"on-tap-batch",props:["batch","index"],data:function(){return{onTapColors:["red","pink","purple","deep-purple"],upcomingColors:["light-green","lime","amber","orange","deep-orange"],batchProgress:0}},computed:{style:function(t){return t.batch.style},name:function(t){return t.batch.name},status:function(t){return t.batch.status},abv:function(t){return t.batch.abv},untappdAppLink:function(t){return t.batch.untappd?"untappd://beer/"+t.batch.untappd.split("/").pop():""},baseColor:function(){return"ontap"===this.status?this.onTapColors[this.batch.tap-1]:this.upcomingColors[this.index]},bgColor:function(){return this.baseColor+" darken-2"},buttonColor:function(){return this.baseColor+" lighten-2"},remaining:function(t){return t.batchProgress>=100?"Kicked any day now...":isNaN(t.batchProgress)?"Who knows?":100-t.batchProgress+"%"}},mounted:function(){var t=new Date(this.batch.kegged),e=new Date(this.batch.empty),n=e-t,a=new Date,s=a-t,r=this;setTimeout(function(){r.batchProgress=Math.round(s/n*100)},150*this.batch.tap)}},h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-flex",{staticClass:"pa-1 mt-1",attrs:{md3:"",sm6:"",xs12:""}},[n("v-card",{staticClass:"white--text",attrs:{color:t.bgColor}},[n("div",{staticClass:"tap-name"},[t._v(t._s(t.batch.tap))]),t._v(" "),n("v-card-title",{attrs:{"primary-title":""}},[n("div",[n("div",{staticClass:"headline"},[t._v(t._s(t.name))]),t._v(" "),n("span",{staticClass:"style-name"},[t._v(t._s(t.style))])])]),t._v(" "),n("v-card-text",[n("div",[t._v(t._s(t.batch.description))]),t._v(" "),t.abv?n("div",[n("strong",[t._v("ABV:")]),t._v(" "+t._s(t.abv)+"%")]):t._e(),t._v(" "),t.batchProgress?n("div",[n("strong",[t._v("Remaining:")]),t._v(" "+t._s(t.remaining)+"\n        "),n("v-progress-linear",{attrs:{size:100,width:25,value:t.batchProgress,color:"white"}})],1):t._e()]),t._v(" "),n("v-card-actions",[n("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.batch.untappd,expression:"batch.untappd"}],staticClass:"hidden-sm-and-down",attrs:{dark:"",color:t.buttonColor,target:"_blank",href:t.batch.untappd}},[t._v("Check in")]),t._v(" "),n("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.untappdAppLink,expression:"untappdAppLink"}],staticClass:"hidden-md-and-up",attrs:{dark:"",color:t.buttonColor,target:"_blank",href:t.untappdAppLink}},[t._v("Check in")])],1)],1)],1)},f=[],m={render:h,staticRenderFns:f},_=m,g=n("VU/8"),b=a,k=g(p,_,!1,b,null,null),w=k.exports,y={props:["batch"],computed:{untappdAppLink:function(t){return t.batch.untappd?"untappd://beer/"+t.batch.untappd.split("/").pop():""}},methods:{openUntappd:function(){var t=this.$vuetify.breakpoint.smAndDown?this.untappdAppLink:this.batch.untappd;window.open(t,"_blank")}}},x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-chip",{on:{click:t.openUntappd}},[t.batch.abv?n("v-avatar",{staticClass:"grey darken-5 white--text"},[t._v(t._s(t.batch.abv))]):t._e(),t._v(" "),n("strong",[t._v(t._s(t.batch.name))]),t._v(" \n    "),n("span",[t._v(t._s(t.batch.style))])],1)],1)},C=[],D={render:x,staticRenderFns:C},P=D,K=n("VU/8"),$=s,S=K(y,P,!1,$,null,null),V=S.exports,L=n("mtWM"),O=n.n(L),R={data:function(){return{title:"What to Brewery Pipeline",ontap:[],upcoming:[],kicked:[],updated:"",copyright:(new Date).getFullYear(),url:"http://up.jamesnweber.com/_kegs/api/model.php"}},created:function(){var t=this;O.a.get(t.url).then(function(e){var n=e.data.beers;t.ontap=n.filter(function(t){return"ontap"===t.status}).sort(function(t,e){return t.tap>e.tap?1:-1}),t.upcoming=n.filter(function(t){return["fermenting","planned","kegged"].includes(t.status)}),t.kicked=n.filter(function(t){return["kicked"].includes(t.status)});var a=new Date(e.data.updated);t.updated=a.toLocaleString()})},computed:{sortedKicked:function(){return this.kicked.sort(function(t,e){return new Date(t.empty)>new Date(e.empty)?-1:1})}},components:{BatchView:w,KickedView:V}},E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-toolbar",{attrs:{fixed:"",app:"",dark:"",color:"primary"}},[n("v-toolbar-title",{domProps:{textContent:t._s(t.title)}})],1),t._v(" "),n("v-content",[n("v-container",{attrs:{fluid:"","grid-list-xs":""}},[n("h1",{staticClass:"display-3 grey--text text--darken-1 text-xs-center"},[t._v("On tap")]),t._v(" "),n("v-layout",{attrs:{row:"",wrap:""}},t._l(t.ontap,function(t){return n("batch-view",{key:t.name,attrs:{batch:t}})})),t._v(" "),n("h1",{staticClass:"display-3 grey--text text--darken-1 text-xs-center"},[t._v("On deck")]),t._v(" "),n("v-layout",{attrs:{row:"",wrap:""}},t._l(t.upcoming,function(t,e){return n("batch-view",{key:t.name,attrs:{index:e,batch:t}})})),t._v(" "),n("h2",{staticClass:"display-1 grey--text text--darken-1 mt-2 pt-3 text-xs-center"},[t._v("Recently kicked")]),t._v(" "),n("v-layout",{staticClass:"ml-1",attrs:{wrap:""}},t._l(t.sortedKicked,function(t,e){return n("kicked-view",{key:e,attrs:{batch:t}})}))],1),t._v(" "),n("v-footer",{attrs:{fixed:"",app:""}},[n("span",[t._v("Updated: "+t._s(t.updated))]),t._v(" "),n("v-spacer"),t._v(" "),n("span",[t._v("© "+t._s(t.copyright))])],1)],1),t._v(">\n")],1)},F=[],B={render:E,staticRenderFns:F},T=B,U=n("VU/8"),A=U(R,T,!1,null,null,null),W=A.exports,N={props:["beers"],data:function(){return{filterOnTap:!1,search:""}},computed:{beerList:function(){var t=this.beers,e=this.search.toLowerCase();return e.length&&(t=t.filter(function(t){var n=t.keg_data.name+t.keg_data.style;return n=n.toLowerCase(),n.indexOf(e)>=0})),t=t.sort(function(t,e){var n=parseInt(t.keg_data.tap)||50,a=parseInt(e.keg_data.tap)||50;return 50!==n||50!==a?n<=a?-1:1:(new Date(t.updated)||new Date(0))<=(new Date(e.updated)||new Date(0))?-1:1}),this.filterOnTap?t.filter(function(t){return t.keg_data.tap}):t}},methods:{selected:function(t){var e="/edit/"+t;this.$router.push({path:e})},isSelected:function(t){return t===this.$route.params.beer},icon:function(t){if(t){return["","looks_one","looks_two","looks_3","looks_4"][t]}}}},q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-text-field",{attrs:{label:"search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),n("v-checkbox",{attrs:{label:"Ontap only"},model:{value:t.filterOnTap,callback:function(e){t.filterOnTap=e},expression:"filterOnTap"}}),t._v(" "),n("router-link",{attrs:{to:"/edit/new"}},[t._v("+")]),t._v(" "),n("v-list",{attrs:{"two-line":""}},[t._l(t.beerList,function(e,a){return[e.header?n("v-subheader",{key:e.header},[t._v(t._s(e.header))]):e.divider?n("v-divider",{key:a,attrs:{inset:e.inset}}):n("v-list-tile",{key:a,class:{selected:t.isSelected(e.id)},attrs:{avatar:""},on:{click:function(n){t.selected(e.id)}}},[n("v-list-tile-avatar",[n("v-icon",{staticClass:"active"},[t._v(t._s(t.icon(e.keg_data.tap)))])],1),t._v(" "),n("v-list-tile-content",[n("v-list-tile-title",{domProps:{innerHTML:t._s(e.keg_data.name)}}),t._v(" "),n("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.keg_data.style)}})],1),t._v(" "),n("v-list-tile-action",[n("v-btn",{attrs:{icon:"",ripple:""}},[n("v-icon",{attrs:{color:"red lighten-1"}})],1)],1)],1)]})],2)],1)},j=[],z={render:q,staticRenderFns:j},M=z,H=n("VU/8"),I=r,Q=H(N,M,!1,I,null,null),X=Q.exports,Z={data:function(){return{id:void 0,name:void 0,abv:void 0,description:void 0,empty:void 0,kegged:void 0,status:void 0,style:void 0,tap:void 0,untappd:void 0,saving:!1,showSuccess:!1,showDelete:!1,valid:!0,beer:{},tapOptions:[{text:"Off",value:null},{text:"1",value:1},{text:"2",value:2},{text:"3",value:3},{text:"4",value:4}],statusOptions:[{text:"On tap",value:"ontap"},{text:"Kicked",value:"kicked"},{text:"Fermenting",value:"fermenting"},{text:"Planned",value:"planned"},{text:"Kegged",value:"kegged"}],rules:{percent:function(t){return!t.includes("%")||"Remove % sign"}}}},props:["kegData"],watch:{kegData:function(t){this.setKeg(t)}},created:function(){this.setKeg(this.kegData)},methods:{save:function(){var t={name:this.name,abv:this.abv,description:this.description,empty:this.empty,kegged:this.kegged,status:this.status,style:this.style,tap:this.tap,untappd:this.untappd};this.$emit("save",t)},reset:function(){this.setKeg(this.kegData)},deleteKeg:function(){this.showDelete=!1,this.$emit("delete")},setKeg:function(t){this.name=t.name,this.abv=t.abv,this.description=t.description,this.empty=t.empty,this.kegged=t.kegged,this.status=t.status,this.style=t.style,this.tap=t.tap,this.untappd=t.untappd}}},J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-text-field",{attrs:{label:"Name",required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),n("v-text-field",{attrs:{label:"ABV",rules:[t.rules.percent]},model:{value:t.abv,callback:function(e){t.abv=e},expression:"abv"}}),t._v(" "),n("v-text-field",{attrs:{label:"Description",required:""},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),t._v(" "),n("v-text-field",{attrs:{label:"empty"},model:{value:t.empty,callback:function(e){t.empty=e},expression:"empty"}}),t._v(" "),n("v-text-field",{attrs:{label:"kegged"},model:{value:t.kegged,callback:function(e){t.kegged=e},expression:"kegged"}}),t._v(" "),n("v-select",{attrs:{items:t.statusOptions,label:"Status"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}}),t._v(" "),n("v-text-field",{attrs:{label:"style",required:""},model:{value:t.style,callback:function(e){t.style=e},expression:"style"}}),t._v(" "),n("v-select",{attrs:{items:t.tapOptions,label:"tap"},model:{value:t.tap,callback:function(e){t.tap=e},expression:"tap"}}),t._v(" "),n("v-text-field",{attrs:{label:"untappd"},model:{value:t.untappd,callback:function(e){t.untappd=e},expression:"untappd"}}),t._v(" "),n("v-btn",{attrs:{color:"success",loading:t.saving,disabled:t.saving},on:{click:t.save}},[t._v("Save")]),t._v(" "),n("v-btn",{attrs:{color:"warning"},on:{click:t.reset}},[t._v("Reset")]),t._v(" "),n("v-dialog",{directives:[{name:"show",rawName:"v-show",value:t.name,expression:"name"}],attrs:{width:"500"},model:{value:t.showDelete,callback:function(e){t.showDelete=e},expression:"showDelete"}},[n("v-btn",{attrs:{slot:"activator",color:"red lighten-2",dark:""},on:{click:function(e){t.showDelete=!0}},slot:"activator"},[t._v("\n    Delete\n  ")]),t._v(" "),n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-1",attrs:{"primary-title":""}},[t._v("\n      Delete\n    ")]),t._v(" "),n("v-card-text",[t._v("\n      Are you sure you want to delete "),n("strong",[t._v(t._s(t.name))]),t._v("?\n    ")]),t._v(" "),n("v-divider"),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(e){t.showDelete=!1}}},[t._v("\n        Cancel\n      ")]),t._v(" "),n("v-btn",{attrs:{color:"red lighten-1",dark:""},on:{click:t.deleteKeg}},[t._v("\n        Delete\n      ")])],1)],1)],1)],1)},Y=[],G={render:J,staticRenderFns:Y},tt=G,et=n("VU/8"),nt=i,at=et(Z,tt,!1,nt,null,null),st=at.exports,rt={components:{KegForm:st},props:["headers"],data:function(){return{id:void 0,kegData:void 0,saving:!1,showSuccess:!1,showDeleteSuccess:!1,name:void 0,valid:!0,beer:{}}},watch:{beer:function(t){t&&t.keg_data&&this.setKeg(t)},$route:function(t,e){this.load()}},computed:{url:function(){return"http://up.jamesnweber.com/_kegs/api/keg.php?id="+this.id},showForm:function(){return"new"===this.id||this.beer}},created:function(){this.load()},methods:{load:function(){var t=this;t.id=this.$route.params.beer,O.a.get(t.url,t.headers).then(function(e){t.beer=e.data,t.setKeg(t.beer)})},save:function(t){this.saving=!0;var e=this,t={id:this.id,keg_data:t};O.a.put(this.url,t,e.headers).then(function(t){e.saving=!1,e.showSuccess=!0,setTimeout(function(){e.showSuccess=!1},3e3)}).catch(function(t){console.log(t)})},deleteKeg:function(){var t=this;O.a.delete(this.url,t.headers).then(function(e){t.showDeleteSuccess=!0,t.$emit("loadBeers"),setTimeout(function(){t.showDeleteSuccess=!1,t.$router.push("/edit")},3e3)})},setKeg:function(t){var e=t.keg_data;this.kegData=e,this.name=e.name}}},it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.name?n("v-container",[n("h1",[t._v(t._s(t.name))]),t._v(" "),n("keg-form",{attrs:{kegData:t.kegData},on:{save:t.save,delete:t.deleteKeg}}),t._v(" "),n("div",[n("v-alert",{attrs:{value:t.showSuccess,type:"success",transition:"slide-y-transition"}},[t._v("\n        Saved successfully\n      ")]),t._v(" "),n("v-alert",{attrs:{value:t.showDeleteSuccess,type:"warning",transition:"slide-y-transition"}},[t._v("\n        Deleted successfully\n      ")])],1)],1):t._e()},ot=[],ct={render:it,staticRenderFns:ot},lt=ct,ut=n("VU/8"),dt=o,vt=ut(rt,lt,!1,dt,null,null),pt=vt.exports,ht={data:function(){return{password:"",menu:!1}},methods:{updatePassword:function(t){this.menu=!1,this.$emit("updatePassword",this.password)}}},ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-menu",{attrs:{"close-on-content-click":!1,"offset-y":""},model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[n("v-btn",{attrs:{slot:"activator",flat:"",dark:""},slot:"activator"},[t._v("Login")]),t._v(" "),n("v-card",[n("v-container",{attrs:{fluid:"","grid-list-lg":""}},[n("v-text-field",{attrs:{label:"password",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"primary",flat:""},on:{click:t.updatePassword}},[t._v("Save")])],1)],1)],1)],1)},mt=[],_t={render:ft,staticRenderFns:mt},gt=_t,bt=n("VU/8"),kt=c,wt=bt(ht,gt,!1,kt,null,null),yt=wt.exports,xt={data:function(){return{beers:[],selected:void 0,title:"Edit",password:"",wrongPassword:!1,url:"http://up.jamesnweber.com/_kegs/api/keg.php"}},components:{EditList:X,EditView:pt,LoginView:yt},created:function(){this.loadBeers()},computed:{selectedBeer:function(){if(this.selected>=0)return this.beers[this.selected]},headers:function(){return{headers:{KegAuthorization:this.password}}}},methods:{select:function(t){this.selected=t},loadBeers:function(){var t=this;O.a.get(t.url,t.headers).then(function(e){t.beers=e.data}).catch(function(e){401===e.response.status&&(t.wrongPassword=!0)})},updatePassword:function(t){this.password=t,this.wrongPassword=!1,this.loadBeers()}}},Ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-toolbar",{attrs:{fixed:"",app:"",dark:"",color:"primary"}},[n("v-toolbar-title",{domProps:{textContent:t._s(t.title)}}),t._v(" "),n("v-spacer"),t._v(" "),n("v-toolbar-items",[n("login-view",{on:{updatePassword:t.updatePassword}})],1)],1),t._v(" "),n("v-content",[n("v-container",[t.password.length&&t.wrongPassword?n("v-layout",{attrs:{row:""}},[n("v-alert",{attrs:{value:"password",type:"error",transition:"slide-y-transition"}},[t._v("Wrong password")])],1):t.password.length?n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs4:""}},[n("edit-list",{attrs:{beers:t.beers},on:{selected:t.select}})],1),t._v(" "),n("v-flex",{attrs:{xs8:""}},[n("router-view",{attrs:{headers:t.headers},on:{loadBeers:t.loadBeers}})],1)],1):n("v-layout",[n("v-alert",{attrs:{value:"password",type:"warning",transition:"slide-y-transition"}},[t._v("Enter password to start")])],1)],1)],1)],1)},Dt=[],Pt={render:Ct,staticRenderFns:Dt},Kt=Pt,$t=n("VU/8"),St=l,Vt=$t(xt,Kt,!1,St,"data-v-3d12dba8",null),Lt=Vt.exports,Ot={components:{KegForm:st},data:function(){return{saving:!1,showSuccess:!1,url:"http://up.jamesnweber.com/_kegs/api/keg.php"}},methods:{save:function(t){var e=this;O.a.post(this.url,t).then(function(t){e.showSuccess=!0,e.$emit("loadBeers"),t.data.id&&e.$router.push("/edit/"+t.data.id),setTimeout(function(){e.showSuccess=!1},3e3)}).catch(function(t){console.log(t)})}}},Rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("h1",[t._v("New beer")]),t._v(" "),n("keg-form",{attrs:{kegData:{}},on:{save:t.save}}),t._v(" "),n("div",[n("v-alert",{attrs:{value:t.showSuccess,type:"success",transition:"slide-y-transition"}},[t._v("\n        Saved successfully\n      ")])],1)],1)},Et=[],Ft={render:Rt,staticRenderFns:Et},Bt=Ft,Tt=n("VU/8"),Ut=u,At=Tt(Ot,Bt,!1,Ut,null,null),Wt=At.exports,Nt=[{path:"",component:W},{path:"/edit",component:Lt,children:[{path:"new",component:Wt},{path:":beer",component:pt}]}],qt=n("3EgV"),jt=n.n(qt),zt=(n("QCv7"),{data:function(){return{title:"What to brew"}}}),Mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("router-view")],1)},Ht=[],It={render:Mt,staticRenderFns:Ht},Qt=It,Xt=n("VU/8"),Zt=Xt(zt,Qt,!1,null,null,null),Jt=Zt.exports;d.a.use(v.a),d.a.use(jt.a),d.a.config.productionTip=!1;var Yt=new v.a({routes:Nt});new d.a({el:"#app",template:"<RouterView/>",components:{RouterView:Jt},router:Yt})},QCv7:function(t,e){},W5C1:function(t,e){},cpaK:function(t,e){},nb0D:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.2788931b3fab05031c0c.js.map