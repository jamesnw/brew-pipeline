webpackJsonp([1],{"5X+L":function(t,e){},"7lZB":function(t,e){},"9bI3":function(t,e){},CzsW:function(t,e){},NHnr:function(t,e,a){"use strict";function n(t){a("9bI3")}function s(t){a("CzsW")}function r(t){a("7lZB")}function i(t){a("RBFC")}function o(t){a("5X+L")}function c(t){a("cpaK")}function l(t){a("nb0D")}function u(t){a("YP1r")}Object.defineProperty(e,"__esModule",{value:!0});var d=a("7+uW"),p=a("/ocq"),v={name:"on-tap-batch",props:["batch","index"],data:function(){return{onTapColors:["red","pink","purple","deep-purple"],upcomingColors:["light-green","lime","amber","orange","deep-orange"],batchProgress:0}},computed:{style:function(t){return t.batch.style},name:function(t){return t.batch.name},status:function(t){return t.batch.status},abv:function(t){return t.batch.abv},untappdAppLink:function(t){return t.batch.untappd?"untappd://beer/"+t.batch.untappd.split("/").pop():""},baseColor:function(){return"ontap"===this.status?this.onTapColors[this.batch.tap-1]:this.upcomingColors[this.index]},bgColor:function(){return this.baseColor+" darken-2"},buttonColor:function(){return this.baseColor+" lighten-2"},remaining:function(t){return t.batchProgress>=100?"Kicked any day now...":isNaN(t.batchProgress)?"Who knows?":100-t.batchProgress+"%"}},mounted:function(){var t=new Date(this.batch.kegged),e=new Date(this.batch.empty),a=e-t,n=new Date,s=n-t,r=this;setTimeout(function(){r.batchProgress=Math.round(s/a*100)},150*this.batch.tap)}},h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-flex",{staticClass:"pa-1 mt-1",attrs:{md3:"",sm6:"",xs12:""}},[a("v-card",{staticClass:"white--text",attrs:{color:t.bgColor}},[a("div",{staticClass:"tap-name"},[t._v(t._s(t.batch.tap))]),t._v(" "),a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("div",{staticClass:"headline"},[t._v(t._s(t.name))]),t._v(" "),a("span",{staticClass:"style-name"},[t._v(t._s(t.style))])])]),t._v(" "),a("v-card-text",[a("div",[t._v(t._s(t.batch.description))]),t._v(" "),t.abv?a("div",[a("strong",[t._v("ABV:")]),t._v(" "+t._s(t.abv)+"%")]):t._e(),t._v(" "),t.batchProgress?a("div",[a("strong",[t._v("Remaining:")]),t._v(" "+t._s(t.remaining)+"\n        "),a("v-progress-linear",{attrs:{size:100,width:25,value:t.batchProgress,color:"white"}})],1):t._e()]),t._v(" "),a("v-card-actions",[a("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.batch.untappd,expression:"batch.untappd"}],staticClass:"hidden-sm-and-down",attrs:{dark:"",color:t.buttonColor,target:"_blank",href:t.batch.untappd}},[t._v("Check in")]),t._v(" "),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.untappdAppLink,expression:"untappdAppLink"}],staticClass:"hidden-md-and-up",attrs:{dark:"",color:t.buttonColor,target:"_blank",href:t.untappdAppLink}},[t._v("Check in")])],1)],1)],1)},f=[],m={render:h,staticRenderFns:f},_=m,g=a("VU/8"),b=n,k=g(v,_,!1,b,null,null),w=k.exports,y={props:["batch"],computed:{untappdAppLink:function(t){return t.batch.untappd?"untappd://beer/"+t.batch.untappd.split("/").pop():""}},methods:{openUntappd:function(){var t=this.$vuetify.breakpoint.smAndDown?this.untappdAppLink:this.batch.untappd;window.open(t,"_blank")}}},x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-chip",{on:{click:t.openUntappd}},[t.batch.abv?a("v-avatar",{staticClass:"grey darken-5 white--text"},[t._v(t._s(t.batch.abv))]):t._e(),t._v(" "),a("strong",[t._v(t._s(t.batch.name))]),t._v(" \n    "),a("span",[t._v(t._s(t.batch.style))])],1)],1)},C=[],D={render:x,staticRenderFns:C},P=D,K=a("VU/8"),$=s,S=K(y,P,!1,$,null,null),V=S.exports,L=a("mtWM"),R=a.n(L),F={data:function(){return{title:"What to Brewery Pipeline",ontap:[],upcoming:[],kicked:[],updated:"",copyright:(new Date).getFullYear(),url:"http://up.jamesnweber.com/_kegs/api/model.php"}},created:function(){var t=this;R.a.get(t.url).then(function(e){var a=e.data.beers;t.ontap=a.filter(function(t){return"ontap"===t.status}).sort(function(t,e){return t.tap>e.tap?1:-1}),t.upcoming=a.filter(function(t){return["fermenting","planned","kegged"].includes(t.status)}),t.kicked=a.filter(function(t){return["kicked"].includes(t.status)});var n=new Date(e.data.updated);t.updated=n.toLocaleString()})},computed:{sortedKicked:function(){return this.kicked.sort(function(t,e){return new Date(t.empty)>new Date(e.empty)?-1:1})}},components:{BatchView:w,KickedView:V}},B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-toolbar",{attrs:{fixed:"",app:"",dark:"",color:"primary"}},[a("v-toolbar-title",{domProps:{textContent:t._s(t.title)}})],1),t._v(" "),a("v-content",[a("v-container",{attrs:{fluid:"","grid-list-xs":""}},[a("h1",{staticClass:"display-3 grey--text text--darken-1 text-xs-center"},[t._v("On tap")]),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},t._l(t.ontap,function(t){return a("batch-view",{key:t.name,attrs:{batch:t}})})),t._v(" "),a("h1",{staticClass:"display-3 grey--text text--darken-1 text-xs-center"},[t._v("On deck")]),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},t._l(t.upcoming,function(t,e){return a("batch-view",{key:t.name,attrs:{index:e,batch:t}})})),t._v(" "),a("h2",{staticClass:"display-1 grey--text text--darken-1 mt-2 pt-3 text-xs-center"},[t._v("Recently kicked")]),t._v(" "),a("v-layout",{staticClass:"ml-1",attrs:{wrap:""}},t._l(t.sortedKicked,function(t,e){return a("kicked-view",{key:e,attrs:{batch:t}})}))],1),t._v(" "),a("v-footer",{attrs:{fixed:"",app:""}},[a("span",[t._v("Updated: "+t._s(t.updated))]),t._v(" "),a("v-spacer"),t._v(" "),a("span",[t._v("© "+t._s(t.copyright))])],1)],1),t._v(">\n")],1)},O=[],E={render:B,staticRenderFns:O},T=E,U=a("VU/8"),A=U(F,T,!1,null,null,null),N=A.exports,W={props:["beers"],data:function(){return{filterOnTap:!1,search:""}},computed:{beerList:function(){var t=this.beers,e=this.search.toLowerCase();return e.length&&(t=t.filter(function(t){var a=t.keg_data.name+t.keg_data.style;return a=a.toLowerCase(),a.indexOf(e)>=0})),t=t.sort(function(t,e){var a=parseInt(t.keg_data.tap)||50,n=parseInt(e.keg_data.tap)||50;return 50!==a||50!==n?a<=n?-1:1:(new Date(t.updated)||new Date(0))<=(new Date(e.updated)||new Date(0))?-1:1}),this.filterOnTap?t.filter(function(t){return t.keg_data.tap}):t}},methods:{selected:function(t){var e="/edit/"+t;this.$router.push({path:e})},isSelected:function(t){return t===this.$route.params.beer},icon:function(t){if(t){return["","looks_one","looks_two","looks_3","looks_4"][t]}}}},j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-text-field",{attrs:{label:"search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),a("v-checkbox",{attrs:{label:"Ontap only"},model:{value:t.filterOnTap,callback:function(e){t.filterOnTap=e},expression:"filterOnTap"}}),t._v(" "),a("router-link",{attrs:{to:"/edit/new"}},[t._v("+")]),t._v(" "),a("v-list",{attrs:{"two-line":""}},[t._l(t.beerList,function(e,n){return[e.header?a("v-subheader",{key:e.header},[t._v(t._s(e.header))]):e.divider?a("v-divider",{key:n,attrs:{inset:e.inset}}):a("v-list-tile",{key:n,class:{selected:t.isSelected(e.id)},attrs:{avatar:""},on:{click:function(a){t.selected(e.id)}}},[a("v-list-tile-avatar",[a("v-icon",{staticClass:"active"},[t._v(t._s(t.icon(e.keg_data.tap)))])],1),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.keg_data.name)}}),t._v(" "),a("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.keg_data.style)}})],1),t._v(" "),a("v-list-tile-action",[a("v-btn",{attrs:{icon:"",ripple:""}},[a("v-icon",{attrs:{color:"red lighten-1"}})],1)],1)],1)]})],2)],1)},z=[],M={render:j,staticRenderFns:z},q=M,H=a("VU/8"),I=r,Y=H(W,q,!1,I,null,null),Q=Y.exports,X={data:function(){return{id:void 0,name:void 0,abv:void 0,description:void 0,empty:void 0,kegged:void 0,status:void 0,style:void 0,tap:void 0,untappd:void 0,saving:!1,showSuccess:!1,showDelete:!1,valid:!0,beer:{},tapOptions:[{text:"Off",value:null},{text:"1",value:1},{text:"2",value:2},{text:"3",value:3},{text:"4",value:4}],statusOptions:[{text:"On tap",value:"ontap"},{text:"Kicked",value:"kicked"},{text:"Fermenting",value:"fermenting"},{text:"Planned",value:"planned"},{text:"Kegged",value:"kegged"}],rules:{percent:function(t){return!t||!t.includes("%")||"Remove % sign"}}}},props:["kegData"],watch:{kegData:function(t){this.setKeg(t)}},created:function(){this.setKeg(this.kegData)},methods:{save:function(){var t={name:this.name,abv:this.abv,description:this.description,empty:this.empty,kegged:this.kegged,status:this.status,style:this.style,tap:this.tap,untappd:this.untappd};this.$emit("save",t)},reset:function(){this.setKeg(this.kegData)},deleteKeg:function(){this.showDelete=!1,this.$emit("delete")},setKeg:function(t){this.name=t.name,this.abv=t.abv,this.description=t.description,this.empty=t.empty,this.kegged=t.kegged,this.status=t.status,this.style=t.style,this.tap=t.tap,this.untappd=t.untappd}}},Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{label:"Name",required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),a("v-text-field",{attrs:{label:"ABV",rules:[t.rules.percent]},model:{value:t.abv,callback:function(e){t.abv=e},expression:"abv"}}),t._v(" "),a("v-text-field",{attrs:{label:"Description",required:""},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),t._v(" "),a("v-text-field",{attrs:{label:"empty"},model:{value:t.empty,callback:function(e){t.empty=e},expression:"empty"}}),t._v(" "),a("v-text-field",{attrs:{label:"kegged"},model:{value:t.kegged,callback:function(e){t.kegged=e},expression:"kegged"}}),t._v(" "),a("v-select",{attrs:{items:t.statusOptions,label:"Status"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}}),t._v(" "),a("v-text-field",{attrs:{label:"style",required:""},model:{value:t.style,callback:function(e){t.style=e},expression:"style"}}),t._v(" "),a("v-select",{attrs:{items:t.tapOptions,label:"tap"},model:{value:t.tap,callback:function(e){t.tap=e},expression:"tap"}}),t._v(" "),a("v-text-field",{attrs:{label:"untappd"},model:{value:t.untappd,callback:function(e){t.untappd=e},expression:"untappd"}}),t._v(" "),a("v-btn",{attrs:{color:"success",loading:t.saving,disabled:t.saving},on:{click:t.save}},[t._v("Save")]),t._v(" "),a("v-btn",{attrs:{color:"warning"},on:{click:t.reset}},[t._v("Reset")]),t._v(" "),a("v-dialog",{directives:[{name:"show",rawName:"v-show",value:t.name,expression:"name"}],attrs:{width:"500"},model:{value:t.showDelete,callback:function(e){t.showDelete=e},expression:"showDelete"}},[a("v-btn",{attrs:{slot:"activator",color:"red lighten-2",dark:""},on:{click:function(e){t.showDelete=!0}},slot:"activator"},[t._v("\n    Delete\n  ")]),t._v(" "),a("v-card",[a("v-card-title",{staticClass:"headline grey lighten-1",attrs:{"primary-title":""}},[t._v("\n      Delete\n    ")]),t._v(" "),a("v-card-text",[t._v("\n      Are you sure you want to delete "),a("strong",[t._v(t._s(t.name))]),t._v("?\n    ")]),t._v(" "),a("v-divider"),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(e){t.showDelete=!1}}},[t._v("\n        Cancel\n      ")]),t._v(" "),a("v-btn",{attrs:{color:"red lighten-1",dark:""},on:{click:t.deleteKeg}},[t._v("\n        Delete\n      ")])],1)],1)],1)],1)},J=[],G={render:Z,staticRenderFns:J},tt=G,et=a("VU/8"),at=i,nt=et(X,tt,!1,at,null,null),st=nt.exports,rt={components:{KegForm:st},props:["headers"],data:function(){return{id:void 0,kegData:void 0,saving:!1,showSuccess:!1,showDeleteSuccess:!1,name:void 0,valid:!0,beer:{}}},watch:{beer:function(t){t&&t.keg_data&&this.setKeg(t)},$route:function(t,e){this.load()}},computed:{url:function(){return"http://up.jamesnweber.com/_kegs/api/keg.php?id="+this.id},showForm:function(){return"new"===this.id||this.beer}},created:function(){this.load()},methods:{load:function(){var t=this;t.id=this.$route.params.beer,R.a.get(t.url,t.headers).then(function(e){t.beer=e.data,t.setKeg(t.beer)})},save:function(t){this.saving=!0;var e=this,t={id:this.id,keg_data:t};R.a.put(this.url,t,e.headers).then(function(t){e.saving=!1,e.showSuccess=!0,setTimeout(function(){e.showSuccess=!1},3e3)}).catch(function(t){console.log(t)})},deleteKeg:function(){var t=this;R.a.delete(this.url,t.headers).then(function(e){t.showDeleteSuccess=!0,t.$emit("loadBeers"),setTimeout(function(){t.showDeleteSuccess=!1,t.$router.push("/edit")},3e3)})},setKeg:function(t){var e=t.keg_data;this.kegData=e,this.name=e.name}}},it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.name?a("v-container",[a("h1",[t._v(t._s(t.name))]),t._v(" "),a("keg-form",{attrs:{kegData:t.kegData},on:{save:t.save,delete:t.deleteKeg}}),t._v(" "),a("div",[a("v-alert",{attrs:{value:t.showSuccess,type:"success",transition:"slide-y-transition"}},[t._v("\n        Saved successfully\n      ")]),t._v(" "),a("v-alert",{attrs:{value:t.showDeleteSuccess,type:"warning",transition:"slide-y-transition"}},[t._v("\n        Deleted successfully\n      ")])],1)],1):t._e()},ot=[],ct={render:it,staticRenderFns:ot},lt=ct,ut=a("VU/8"),dt=o,pt=ut(rt,lt,!1,dt,null,null),vt=pt.exports,ht={data:function(){return{password:"",menu:!1}},methods:{updatePassword:function(t){this.menu=!1,this.$emit("updatePassword",this.password)}}},ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{attrs:{"close-on-content-click":!1,"offset-y":""},model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-btn",{attrs:{slot:"activator",flat:"",dark:""},slot:"activator"},[t._v("Login")]),t._v(" "),a("v-card",[a("v-container",{attrs:{fluid:"","grid-list-lg":""}},[a("v-text-field",{attrs:{label:"password",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:t.updatePassword}},[t._v("Save")])],1)],1)],1)],1)},mt=[],_t={render:ft,staticRenderFns:mt},gt=_t,bt=a("VU/8"),kt=c,wt=bt(ht,gt,!1,kt,null,null),yt=wt.exports,xt={data:function(){return{beers:[],selected:void 0,title:"Edit",password:"",wrongPassword:!1,url:"http://up.jamesnweber.com/_kegs/api/keg.php"}},components:{EditList:Q,EditView:vt,LoginView:yt},created:function(){this.loadBeers()},computed:{selectedBeer:function(){if(this.selected>=0)return this.beers[this.selected]},headers:function(){return{headers:{KegAuthorization:this.password}}}},methods:{select:function(t){this.selected=t},loadBeers:function(){var t=this;R.a.get(t.url,t.headers).then(function(e){t.beers=e.data}).catch(function(e){401===e.response.status&&(t.wrongPassword=!0)})},updatePassword:function(t){this.password=t,this.wrongPassword=!1,this.loadBeers()}}},Ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-toolbar",{attrs:{fixed:"",app:"",dark:"",color:"primary"}},[a("v-toolbar-title",{domProps:{textContent:t._s(t.title)}}),t._v(" "),a("v-spacer"),t._v(" "),a("v-toolbar-items",[a("login-view",{on:{updatePassword:t.updatePassword}})],1)],1),t._v(" "),a("v-content",[a("v-container",[t.password.length&&t.wrongPassword?a("v-layout",{attrs:{row:""}},[a("v-alert",{attrs:{value:"password",type:"error",transition:"slide-y-transition"}},[t._v("Wrong password")])],1):t.password.length?a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs4:""}},[a("edit-list",{attrs:{beers:t.beers},on:{selected:t.select}})],1),t._v(" "),a("v-flex",{attrs:{xs8:""}},[a("router-view",{attrs:{headers:t.headers},on:{loadBeers:t.loadBeers}})],1)],1):a("v-layout",[a("v-alert",{attrs:{value:"password",type:"warning",transition:"slide-y-transition"}},[t._v("Enter password to start")])],1)],1)],1)],1)},Dt=[],Pt={render:Ct,staticRenderFns:Dt},Kt=Pt,$t=a("VU/8"),St=l,Vt=$t(xt,Kt,!1,St,"data-v-3d12dba8",null),Lt=Vt.exports,Rt={components:{KegForm:st},props:["headers"],data:function(){return{saving:!1,showSuccess:!1,url:"http://up.jamesnweber.com/_kegs/api/keg.php"}},methods:{save:function(t){var e=this;R.a.post(this.url,t,e.headers).then(function(t){e.showSuccess=!0,e.$emit("loadBeers"),t.data.id&&e.$router.push("/edit/"+t.data.id),setTimeout(function(){e.showSuccess=!1},3e3)}).catch(function(t){console.log(t)})}}},Ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("h1",[t._v("New beer")]),t._v(" "),a("keg-form",{attrs:{kegData:{}},on:{save:t.save}}),t._v(" "),a("div",[a("v-alert",{attrs:{value:t.showSuccess,type:"success",transition:"slide-y-transition"}},[t._v("\n        Saved successfully\n      ")])],1)],1)},Bt=[],Ot={render:Ft,staticRenderFns:Bt},Et=Ot,Tt=a("VU/8"),Ut=u,At=Tt(Rt,Et,!1,Ut,null,null),Nt=At.exports,Wt=[{path:"",component:N},{path:"/edit",component:Lt,children:[{path:"new",component:Nt},{path:":beer",component:vt}]}],jt=a("3EgV"),zt=a.n(jt),Mt=(a("QCv7"),{data:function(){return{title:"What to brew"}}}),qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("router-view")],1)},Ht=[],It={render:qt,staticRenderFns:Ht},Yt=It,Qt=a("VU/8"),Xt=Qt(Mt,Yt,!1,null,null,null),Zt=Xt.exports;d.a.use(p.a),d.a.use(zt.a),d.a.config.productionTip=!1;var Jt=new p.a({routes:Wt});new d.a({el:"#app",template:"<RouterView/>",components:{RouterView:Zt},router:Jt})},QCv7:function(t,e){},RBFC:function(t,e){},YP1r:function(t,e){},cpaK:function(t,e){},nb0D:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.d46dde8eff16e52147ba.js.map